<!DOCTYPE html>
<html>
<head>
    <title>Checkout</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

<div class="container py-5">

    <h2>Checkout</h2>
    <hr>

    <!-- Cart Summary -->
    <h4>Order Summary</h4>
    <ul class="list-group mb-4">
        <% cart.forEach(item => { %>
            <li class="list-group-item d-flex justify-content-between">
                <strong><%= item.name %></strong>
                <span>$<%= item.price %> Ã— <%= item.quantity %></span>
            </li>
        <% }) %>
        <li class="list-group-item d-flex justify-content-between fw-bold">
            Total: <span>$<%= total %></span>
        </li>
    </ul>

    <!-- Checkout Form -->
    <form action="/place-order" method="POST" class="card p-4 shadow">

        <h4 class="mb-3">Delivery Information</h4>

        <div class="mb-3">
            <label class="form-label">Full Name</label>
            <input type="text" name="fullName" class="form-control" value="<%= user ? user.username : '' %>" required>
        </div>

        <div class="mb-3">
            <label class="form-label">Delivery Address</label>
            <textarea name="address" class="form-control" rows="2" required><%= user ? user.address : '' %></textarea>
        </div>

        <div class="mb-3">
            <label class="form-label">Contact Number</label>
            <input type="text" name="contact" class="form-control" value="<%= user ? user.contact : '' %>" required>
        </div>

        <h4 class="mt-4">Payment Method</h4>

        <div class="form-check">
            <input class="form-check-input" type="radio" name="paymentMethod" value="Credit Card" <%= (!user || (user && user.preferredPayment === 'Credit Card')) ? '': '' %> required>
            <label class="form-check-label">Credit Card</label>
        </div>

        <div class="form-check">
            <input class="form-check-input" type="radio" name="paymentMethod" value="PayNow" <%= (!user || (user && user.preferredPayment === 'PayNow')) ? '': '' %>>
            <label class="form-check-label">PayNow</label>
        </div>

        <div class="form-check mb-4">
            <input class="form-check-input" type="radio" name="paymentMethod" value="Cash on Delivery" <%= (!user || (user && user.preferredPayment === 'Cash on Delivery')) ? 'checked' : '' %>>
            <label class="form-check-label">Cash on Delivery</label>
        </div>

        <button type="submit" class="btn btn-success w-100">Place Order</button>
    </form>
</div>

</body>
</html>
